(this.webpackJsonpnotesapp=this.webpackJsonpnotesapp||[]).push([[0],{203:function(e,t,n){},204:function(e,t,n){},272:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(42),c=n.n(o),i=(n(203),n(55)),s=n.n(i),u=n(91),p=n(186),l=n(98),d=n(187),m=n(30),f=(n.p,n(204),n(163)),b=(n(205),n(302)),j=n(300),O=n(301),y=n(185),h=n(36),v=Object(b.a)(),x={notes:[],loading:!0,error:!1,form:{name:"",description:""}},g=function(e,t){switch(t.type){case"ADD_NOTE":return Object(m.a)(Object(m.a)({},e),{},{notes:[t.note].concat(Object(d.a)(e.notes))});case"RESET_FORM":return Object(m.a)(Object(m.a)({},e),{},{form:x.form});case"SET_INPUT":return Object(m.a)(Object(m.a)({},e),{},{form:Object(m.a)(Object(m.a)({},e.form),{},Object(l.a)({},t.name,t.value))});case"SET_NOTES":return Object(m.a)(Object(m.a)({},e),{},{notes:t.notes,loading:!1});case"ERROR":return Object(m.a)(Object(m.a)({},e),{},{loading:!1,error:!0});default:return Object(m.a)({},e)}},N=function(){var e=Object(r.useReducer)(g,x),t=Object(p.a)(e,2),n=t[0],a=t[1],o=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.graphql({query:"\n  query ListNotes(\n    $filter: ModelNoteFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listNotes(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        clientId\n        name\n        description\n        completed\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n"});case 3:t=e.sent,a({type:"SET_NOTES",notes:t.data.listNotes.items.sort((function(e,t){return e.name<t.name?-1:1}))}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),a({type:"ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){o();var e=f.a.graphql({query:"\n  subscription OnCreateNote {\n    onCreateNote {\n      id\n      clientId\n      name\n      description\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n"}).subscribe({next:function(e){var t=e.value.data.onCreateNote;v!==t.clientId&&a({type:"ADD_NOTE",note:t})}});return function(){return e.unsubscribe()}}),[]);var c={container:{padding:20},input:{marginBottom:10},item:{textAlign:"left"},p:{color:"#1890ff"}},i=function(){var e=Object(u.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.form).name&&t.description){e.next=3;break}return e.abrupt("return",alert("please enter a name and description"));case 3:return r=Object(m.a)(Object(m.a)({},t),{},{clientId:v,completed:!1,id:Object(b.a)()}),a({type:"ADD_NOTE",note:r}),a({type:"RESET_FORM"}),e.prev=6,e.next=9,f.a.graphql({query:"\n  mutation CreateNote(\n    $input: CreateNoteInput!\n    $condition: ModelNoteConditionInput\n  ) {\n    createNote(input: $input, condition: $condition) {\n      id\n      clientId\n      name\n      description\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n",variables:{input:r}});case 9:console.log("successfully created note!"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.error("error: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"SET_NOTES",notes:n.notes.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{completed:e==t?!e.completed:e.completed})}))}),e.prev=1,e.next=4,f.a.graphql({query:"\n  mutation UpdateNote(\n    $input: UpdateNoteInput!\n    $condition: ModelNoteConditionInput\n  ) {\n    updateNote(input: $input, condition: $condition) {\n      id\n      clientId\n      name\n      description\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n",variables:{input:{id:t.id,completed:!t.completed}}});case 4:console.log("note successfully updated!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"SET_NOTES",notes:n.notes.filter((function(e){return e!=t}))}),e.prev=1,e.next=4,f.a.graphql({query:"\n  mutation DeleteNote(\n    $input: DeleteNoteInput!\n    $condition: ModelNoteConditionInput\n  ) {\n    deleteNote(input: $input, condition: $condition) {\n      id\n      clientId\n      name\n      description\n      completed\n      createdAt\n      updatedAt\n    }\n  }\n",variables:{input:{id:t.id}}});case 4:console.log("successfully deleted note!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),N=function(e){a({type:"SET_INPUT",name:e.target.name,value:e.target.value})};return Object(h.jsxs)("div",{style:c.container,children:[Object(h.jsx)(O.a,{onChange:N,value:n.form.name,placeholder:"Enter note name",name:"name",style:c.input}),Object(h.jsx)(O.a,{onChange:N,value:n.form.description,placeholder:"Enter note description",name:"description",style:c.input}),Object(h.jsx)(y.a,{onClick:i,type:"primary",children:"Create Note"}),Object(h.jsx)(j.b,{loading:n.loading,dataSource:n.notes,renderItem:function(e){return Object(h.jsx)(j.b.Item,{style:c.item,actions:[Object(h.jsx)("p",{style:c.p,onClick:function(){return d(e)},children:"Delete"}),Object(h.jsx)("p",{style:c.p,onClick:function(){return l(e)},children:e.completed?"mark incomplete":"mark completed"})],children:Object(h.jsx)(j.b.Item.Meta,{title:"".concat(e.name," ").concat(e.completed?" (completed)":""),description:e.description})})}})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,304)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},T={aws_project_region:"us-east-2",aws_appsync_graphqlEndpoint:"https://vv5u5xx2i5fcpfousixoftq3ny.appsync-api.us-east-2.amazonaws.com/graphql",aws_appsync_region:"us-east-2",aws_appsync_authenticationType:"API_KEY",aws_appsync_apiKey:"da2-3jb77baosjc7lhvzkny3yjdxva"};n(126).default.configure(T),c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(N,{})}),document.getElementById("root")),E()}},[[272,1,2]]]);
//# sourceMappingURL=main.3777eccb.chunk.js.map